@using Booking.Web.Localization
@using Booking.Web.ViewModels.Event
@model Booking.Web.ViewModels.Event.DisplayEventViewModel

@{
    ViewBag.Title = Model.Title;
}

@section styles{
    @Styles.Render("~/Content/room-styles.css")
    @Styles.Render("~/Content/home-page.css")
    @Styles.Render("~/Content/Site.css")
    @Styles.Render("http://fonts.googleapis.com/css?family=Nunito:400,300,700")
    @Styles.Render("~/Content/schedule.css")
    @Styles.Render("~/Content/event-page.css")
}

@section scripts
{
    @Scripts.Render("//code.jquery.com/ui/1.12.1/jquery-ui.js")
    @Scripts.Render("~/Scripts/jquery.mapit.js")
    @Scripts.Render("~/Scripts/initializers.js")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/Scripts/project/event-page.js")
}

<div class="event-container">
    <div class="page-container container">
        <div id="event-info">
            <h3>@Model.Title</h3>
            <i class="fa fa-user" aria-hidden="true"></i>
            <span id="author-name">@Model.AuthorName</span>
            <br/>
            <p>@Model.AdditionalInfo</p>
            <br/>
            @if (Model.IsJoinAvailable)
            {
                <span>@string.Format(Localization.EventPageParticipantsCount, Model.ParticipantsCount)</span>
                @Html.Partial("_JoinEventPartial", new JoinEventViewModel {EventId = Model.Id})
            }
        </div>
        <div id="event-calendar">
            <div id="event-date">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <span>@Model.EventDateTime.ToString("dd.MM.yyyy")</span>
                <i class="fa fa-clock-o" aria-hidden="true"></i>
                <span>@Model.EventDateTime.ToString("HH:mm") - @Model.EventDateTime.AddMinutes(Model.Duration).ToString("HH:mm")</span>
            </div>
        </div>
        @if (Model.IsJoinAvailable && Model.CanEdit)
        {
            <span>@Localization.RegisteredParticipants</span>
            <ul>
                @foreach (var pair in Model.ParticipantsEmails)
                {
                    <li class="participant-email-li col-md-4">
                        <span>@pair.Value</span>
                        <i class="fa fa-times" aria-hidden="true" data-form-id="#remove-participant-@pair.Key"></i>
                        @using (Html.BeginForm("RemoveParticipant", "Event", new {participantId = pair.Key}, FormMethod.Post, new {@class = "remove-participant-form"}))
                        {
                            @Html.AntiForgeryToken()
                            <input type="submit" value="submit" id="remove-participant-@pair.Key" class="remove-participant-submit"/>
                        }
                    </li>
                }
            </ul>
        }
    </div>
</div>

@Html.Partial("_RoomMapRoutePartial", Model)

<div class="buttons-container">

</div>

<div id="map_canvas"></div>