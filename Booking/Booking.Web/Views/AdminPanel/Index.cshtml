@using Booking.Web.ViewModels.AdminPanel
@model Booking.Web.ViewModels.AdminPanel.AdminPanelViewModel

@section scripts{
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/Scripts/bootstrap-datepicker/js/bootstrap-datepicker.js")

    <script>
        $(document).ready(function () {

            var dp = $("#datepicker");

            dp.datepicker({
                format: 'dd/MM/yyyy'
            });

            dp.on('changeDate', function (ev) {
                dp.val(ev.target.value);
            });

        });
    </script>
}
@section styles {
    @Styles.Render("~/Content/bootstrap-datepicker.css")
}

<ul>
    @foreach (var pair in Model.AudienceMaps)
    {
        <li>
            <a href="@Url.Action("AudienceMap", "AdminPanel", new {id = pair.Key})">@pair.Value</a>

            @using (Html.BeginForm("DeleteAudienceMap", "AdminPanel", new {id = pair.Key}, FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-danger">Delete</button>
            }

            @using (Html.BeginForm("SetActiveAudienceMap", "AdminPanel", new {id = pair.Key}, FormMethod.Post))
            {
                @Html.AntiForgeryToken()
                <button type="submit" class="btn @(Model.ActiveMapId == pair.Key ? "btn-default" : "btn-primary")">Set active</button>
            }
        </li>
    }
</ul>

<a href="@Url.Action("CreateAudienceMapPage", "AdminPanel")">Create new audience map</a>

@Html.Partial("_NewScheduleRulePartial", new CreateScheduleRuleViewModel {AppliedDate = DateTime.Now})